/*****************************************************************************************
* @file               : cpu.c
* @author             : ayangs
* @date               : 2019/02/19
* @brief              : Source files for cpu.
******************************************************************************************/
/*includes ------------------------------------------------------------------------------*/
#include "includes.h"

/*macros --------------------------------------------------------------------------------*/

/*typedefs ------------------------------------------------------------------------------*/

/*variables -----------------------------------------------------------------------------*/

/*prototypes ----------------------------------------------------------------------------*/

/*private -------------------------------------------------------------------------------*/

/*public --------------------------------------------------------------------------------*/

uint32_t cpu_interrupt_disable(void)
{
  uint32_t result;

  __ASM volatile ("mrs %0, primask" : "=r" (result));
  
  __ASM volatile ("cpsid i" : : : "memory");
  
  return(result);
}

void cpu_interrupt_enable(uint32_t level)
{
	__ASM volatile ("msr primask, %0" : : "r" (level) );
}

